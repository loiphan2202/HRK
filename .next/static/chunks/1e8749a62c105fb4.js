(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93479,e=>{"use strict";e.s(["Input",()=>r]);var t=e.i(43476),a=e.i(75157);function r(e){let{className:r,type:l,...s}=e;return(0,t.jsx)("input",{type:l,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",r),...s})}},10204,e=>{"use strict";e.s(["Label",()=>n],10204);var t=e.i(43476),a=e.i(71645),r=e.i(48425),l=a.forwardRef((e,a)=>(0,t.jsx)(r.Primitive.label,{...e,ref:a,onMouseDown:t=>{var a;t.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var s=e.i(75157);function n(e){let{className:a,...r}=e;return(0,t.jsx)(l,{"data-slot":"label",className:(0,s.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...r})}},7233,e=>{"use strict";e.s(["Plus",()=>t],7233);let t=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},84774,e=>{"use strict";e.s(["Table",()=>r,"TableBody",()=>s,"TableCell",()=>o,"TableHead",()=>i,"TableHeader",()=>l,"TableRow",()=>n]);var t=e.i(43476),a=e.i(75157);function r(e){let{className:r,...l}=e;return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",r),...l})})}function l(e){let{className:r,...l}=e;return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",r),...l})}function s(e){let{className:r,...l}=e;return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",r),...l})}function n(e){let{className:r,...l}=e;return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",r),...l})}function i(e){let{className:r,...l}=e;return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...l})}function o(e){let{className:r,...l}=e;return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...l})}},76639,26999,e=>{"use strict";e.s(["Dialog",()=>en,"DialogContent",()=>ec,"DialogDescription",()=>ex,"DialogFooter",()=>ep,"DialogHeader",()=>eu,"DialogTitle",()=>em,"DialogTrigger",()=>ei],76639);var t=e.i(43476);e.s(["Close",()=>er,"Content",()=>ee,"Description",()=>ea,"Overlay",()=>X,"Portal",()=>Q,"Root",()=>$,"Title",()=>et,"Trigger",()=>J,"WarningProvider",()=>K,"createDialogScope",()=>b],26999);var a=e.i(71645),r=e.i(81140),l=e.i(20783),s=e.i(30030),n=e.i(10772),i=e.i(69340),o=e.i(26330),d=e.i(65491),c=e.i(74606),u=e.i(96626),p=e.i(48425),m=e.i(3536),x=e.i(85369),g=e.i(86312),h=e.i(91918),f="Dialog",[j,b]=(0,s.createContextScope)(f),[v,y]=j(f),N=e=>{let{__scopeDialog:r,children:l,open:s,defaultOpen:o,onOpenChange:d,modal:c=!0}=e,u=a.useRef(null),p=a.useRef(null),[m,x]=(0,i.useControllableState)({prop:s,defaultProp:null!=o&&o,onChange:d,caller:f});return(0,t.jsx)(v,{scope:r,triggerRef:u,contentRef:p,contentId:(0,n.useId)(),titleId:(0,n.useId)(),descriptionId:(0,n.useId)(),open:m,onOpenChange:x,onOpenToggle:a.useCallback(()=>x(e=>!e),[x]),modal:c,children:l})};N.displayName=f;var w="DialogTrigger",D=a.forwardRef((e,a)=>{let{__scopeDialog:s,...n}=e,i=y(w,s),o=(0,l.useComposedRefs)(a,i.triggerRef);return(0,t.jsx)(p.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":U(i.open),...n,ref:o,onClick:(0,r.composeEventHandlers)(e.onClick,i.onOpenToggle)})});D.displayName=w;var T="DialogPortal",[C,k]=j(T,{forceMount:void 0}),A=e=>{let{__scopeDialog:r,forceMount:l,children:s,container:n}=e,i=y(T,r);return(0,t.jsx)(C,{scope:r,forceMount:l,children:a.Children.map(s,e=>(0,t.jsx)(u.Presence,{present:l||i.open,children:(0,t.jsx)(c.Portal,{asChild:!0,container:n,children:e})}))})};A.displayName=T;var I="DialogOverlay",R=a.forwardRef((e,a)=>{let r=k(I,e.__scopeDialog),{forceMount:l=r.forceMount,...s}=e,n=y(I,e.__scopeDialog);return n.modal?(0,t.jsx)(u.Presence,{present:l||n.open,children:(0,t.jsx)(P,{...s,ref:a})}):null});R.displayName=I;var F=(0,h.createSlot)("DialogOverlay.RemoveScroll"),P=a.forwardRef((e,a)=>{let{__scopeDialog:r,...l}=e,s=y(I,r);return(0,t.jsx)(x.RemoveScroll,{as:F,allowPinchZoom:!0,shards:[s.contentRef],children:(0,t.jsx)(p.Primitive.div,{"data-state":U(s.open),...l,ref:a,style:{pointerEvents:"auto",...l.style}})})}),S="DialogContent",H=a.forwardRef((e,a)=>{let r=k(S,e.__scopeDialog),{forceMount:l=r.forceMount,...s}=e,n=y(S,e.__scopeDialog);return(0,t.jsx)(u.Presence,{present:l||n.open,children:n.modal?(0,t.jsx)(E,{...s,ref:a}):(0,t.jsx)(O,{...s,ref:a})})});H.displayName=S;var E=a.forwardRef((e,s)=>{let n=y(S,e.__scopeDialog),i=a.useRef(null),o=(0,l.useComposedRefs)(s,n.contentRef,i);return a.useEffect(()=>{let e=i.current;if(e)return(0,g.hideOthers)(e)},[]),(0,t.jsx)(M,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:(0,r.composeEventHandlers)(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null==(t=n.triggerRef.current)||t.focus()}),onPointerDownOutside:(0,r.composeEventHandlers)(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:(0,r.composeEventHandlers)(e.onFocusOutside,e=>e.preventDefault())})}),O=a.forwardRef((e,r)=>{let l=y(S,e.__scopeDialog),s=a.useRef(!1),n=a.useRef(!1);return(0,t.jsx)(M,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var a,r;null==(a=e.onCloseAutoFocus)||a.call(e,t),t.defaultPrevented||(s.current||null==(r=l.triggerRef.current)||r.focus(),t.preventDefault()),s.current=!1,n.current=!1},onInteractOutside:t=>{var a,r;null==(a=e.onInteractOutside)||a.call(e,t),t.defaultPrevented||(s.current=!0,"pointerdown"===t.detail.originalEvent.type&&(n.current=!0));let i=t.target;(null==(r=l.triggerRef.current)?void 0:r.contains(i))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&n.current&&t.preventDefault()}})}),M=a.forwardRef((e,r)=>{let{__scopeDialog:s,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:c,...u}=e,p=y(S,s),x=a.useRef(null),g=(0,l.useComposedRefs)(r,x);return(0,m.useFocusGuards)(),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.FocusScope,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:c,children:(0,t.jsx)(o.DismissableLayer,{role:"dialog",id:p.contentId,"aria-describedby":p.descriptionId,"aria-labelledby":p.titleId,"data-state":U(p.open),...u,ref:g,onDismiss:()=>p.onOpenChange(!1)})}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Y,{titleId:p.titleId}),(0,t.jsx)(Z,{contentRef:x,descriptionId:p.descriptionId})]})]})}),L="DialogTitle",_=a.forwardRef((e,a)=>{let{__scopeDialog:r,...l}=e,s=y(L,r);return(0,t.jsx)(p.Primitive.h2,{id:s.titleId,...l,ref:a})});_.displayName=L;var z="DialogDescription",B=a.forwardRef((e,a)=>{let{__scopeDialog:r,...l}=e,s=y(z,r);return(0,t.jsx)(p.Primitive.p,{id:s.descriptionId,...l,ref:a})});B.displayName=z;var q="DialogClose",V=a.forwardRef((e,a)=>{let{__scopeDialog:l,...s}=e,n=y(q,l);return(0,t.jsx)(p.Primitive.button,{type:"button",...s,ref:a,onClick:(0,r.composeEventHandlers)(e.onClick,()=>n.onOpenChange(!1))})});function U(e){return e?"open":"closed"}V.displayName=q;var W="DialogTitleWarning",[K,G]=(0,s.createContext)(W,{contentName:S,titleName:L,docsSlug:"dialog"}),Y=e=>{let{titleId:t}=e,r=G(W),l="`".concat(r.contentName,"` requires a `").concat(r.titleName,"` for the component to be accessible for screen reader users.\n\nIf you want to hide the `").concat(r.titleName,"`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/").concat(r.docsSlug);return a.useEffect(()=>{t&&(document.getElementById(t)||console.error(l))},[l,t]),null},Z=e=>{let{contentRef:t,descriptionId:r}=e,l=G("DialogDescriptionWarning"),s="Warning: Missing `Description` or `aria-describedby={undefined}` for {".concat(l.contentName,"}.");return a.useEffect(()=>{var e;let a=null==(e=t.current)?void 0:e.getAttribute("aria-describedby");r&&a&&(document.getElementById(r)||console.warn(s))},[s,t,r]),null},$=N,J=D,Q=A,X=R,ee=H,et=_,ea=B,er=V;let el=(0,e.i(75254).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var es=e.i(75157);function en(e){let{...a}=e;return(0,t.jsx)($,{"data-slot":"dialog",...a})}function ei(e){let{...a}=e;return(0,t.jsx)(J,{"data-slot":"dialog-trigger",...a})}function eo(e){let{...a}=e;return(0,t.jsx)(Q,{"data-slot":"dialog-portal",...a})}function ed(e){let{className:a,...r}=e;return(0,t.jsx)(X,{"data-slot":"dialog-overlay",className:(0,es.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...r})}function ec(e){let{className:a,children:r,showCloseButton:l=!0,...s}=e;return(0,t.jsxs)(eo,{"data-slot":"dialog-portal",children:[(0,t.jsx)(ed,{}),(0,t.jsxs)(ee,{"data-slot":"dialog-content",className:(0,es.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),...s,children:[r,l&&(0,t.jsxs)(er,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(el,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function eu(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,es.cn)("flex flex-col gap-2 text-center sm:text-left",a),...r})}function ep(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,es.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",a),...r})}function em(e){let{className:a,...r}=e;return(0,t.jsx)(et,{"data-slot":"dialog-title",className:(0,es.cn)("text-lg leading-none font-semibold",a),...r})}function ex(e){let{className:a,...r}=e;return(0,t.jsx)(ea,{"data-slot":"dialog-description",className:(0,es.cn)("text-muted-foreground text-sm",a),...r})}},92930,41071,68499,e=>{"use strict";e.s(["Edit2",()=>a],92930);var t=e.i(75254);let a=(0,t.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["MoreHorizontal",()=>r],41071);let r=(0,t.default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["AlertDialog",()=>S,"AlertDialogAction",()=>B,"AlertDialogCancel",()=>q,"AlertDialogContent",()=>O,"AlertDialogDescription",()=>z,"AlertDialogFooter",()=>L,"AlertDialogHeader",()=>M,"AlertDialogTitle",()=>_],68499);var l=e.i(43476),s=e.i(71645),n=e.i(30030),i=e.i(20783),o=e.i(26999),d=e.i(81140),c=e.i(91918),u="AlertDialog",[p,m]=(0,n.createContextScope)(u,[o.createDialogScope]),x=(0,o.createDialogScope)(),g=e=>{let{__scopeAlertDialog:t,...a}=e,r=x(t);return(0,l.jsx)(o.Root,{...r,...a,modal:!0})};g.displayName=u,s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=x(a);return(0,l.jsx)(o.Trigger,{...s,...r,ref:t})}).displayName="AlertDialogTrigger";var h=e=>{let{__scopeAlertDialog:t,...a}=e,r=x(t);return(0,l.jsx)(o.Portal,{...r,...a})};h.displayName="AlertDialogPortal";var f=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=x(a);return(0,l.jsx)(o.Overlay,{...s,...r,ref:t})});f.displayName="AlertDialogOverlay";var j="AlertDialogContent",[b,v]=p(j),y=(0,c.createSlottable)("AlertDialogContent"),N=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,children:r,...n}=e,c=x(a),u=s.useRef(null),p=(0,i.useComposedRefs)(t,u),m=s.useRef(null);return(0,l.jsx)(o.WarningProvider,{contentName:j,titleName:w,docsSlug:"alert-dialog",children:(0,l.jsx)(b,{scope:a,cancelRef:m,children:(0,l.jsxs)(o.Content,{role:"alertdialog",...c,...n,ref:p,onOpenAutoFocus:(0,d.composeEventHandlers)(n.onOpenAutoFocus,e=>{var t;e.preventDefault(),null==(t=m.current)||t.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,l.jsx)(y,{children:r}),(0,l.jsx)(R,{contentRef:u})]})})})});N.displayName=j;var w="AlertDialogTitle",D=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=x(a);return(0,l.jsx)(o.Title,{...s,...r,ref:t})});D.displayName=w;var T="AlertDialogDescription",C=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=x(a);return(0,l.jsx)(o.Description,{...s,...r,ref:t})});C.displayName=T;var k=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,s=x(a);return(0,l.jsx)(o.Close,{...s,...r,ref:t})});k.displayName="AlertDialogAction";var A="AlertDialogCancel",I=s.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...r}=e,{cancelRef:s}=v(A,a),n=x(a),d=(0,i.useComposedRefs)(t,s);return(0,l.jsx)(o.Close,{...n,...r,ref:d})});I.displayName=A;var R=e=>{let{contentRef:t}=e,a="`".concat(j,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(j,"` by passing a `").concat(T,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(j,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return s.useEffect(()=>{var e;document.getElementById(null==(e=t.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(a)},[a,t]),null},F=e.i(75157),P=e.i(19455);function S(e){let{...t}=e;return(0,l.jsx)(g,{"data-slot":"alert-dialog",...t})}function H(e){let{...t}=e;return(0,l.jsx)(h,{"data-slot":"alert-dialog-portal",...t})}function E(e){let{className:t,...a}=e;return(0,l.jsx)(f,{"data-slot":"alert-dialog-overlay",className:(0,F.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function O(e){let{className:t,...a}=e;return(0,l.jsxs)(H,{children:[(0,l.jsx)(E,{}),(0,l.jsx)(N,{"data-slot":"alert-dialog-content",className:(0,F.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a})]})}function M(e){let{className:t,...a}=e;return(0,l.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,F.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function L(e){let{className:t,...a}=e;return(0,l.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,F.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function _(e){let{className:t,...a}=e;return(0,l.jsx)(D,{"data-slot":"alert-dialog-title",className:(0,F.cn)("text-lg font-semibold",t),...a})}function z(e){let{className:t,...a}=e;return(0,l.jsx)(C,{"data-slot":"alert-dialog-description",className:(0,F.cn)("text-muted-foreground text-sm",t),...a})}function B(e){let{className:t,...a}=e;return(0,l.jsx)(k,{className:(0,F.cn)((0,P.buttonVariants)(),t),...a})}function q(e){let{className:t,...a}=e;return(0,l.jsx)(I,{className:(0,F.cn)((0,P.buttonVariants)({variant:"outline"}),t),...a})}},76289,e=>{"use strict";e.s(["default",()=>T],76289);var t=e.i(43476),a=e.i(71645),r=e.i(4071),l=e.i(18566),s=e.i(7233),n=e.i(19455),i=e.i(76639),o=e.i(93479),d=e.i(10204),c=e.i(75157);function u(e){let{className:a,...r}=e;return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...r})}function p(){let[e,r]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1),[p,m]=(0,a.useState)([]),[x,g]=(0,a.useState)(!1);async function h(){try{g(!0);let e=await fetch("/api/categories"),t=await e.json();t.success&&m(t.data||[])}catch(e){console.error("Failed to load categories:",e)}finally{g(!1)}}async function f(e){e.preventDefault();let t=e.currentTarget;c(!0);let a=new FormData(t);try{let e=await fetch("/api/products",{method:"POST",body:a,headers:{Accept:"application/json"}});if(!e.ok){let t=await e.json();throw console.error("Create error:",t),Error(t.message||"Failed to create product")}t.reset(),r(!1)}catch(e){console.error("Failed to create product:",e)}finally{c(!1)}}return(0,a.useEffect)(()=>{e&&h()},[e]),(0,t.jsxs)(i.Dialog,{open:e,onOpenChange:r,children:[(0,t.jsx)(i.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(n.Button,{children:[(0,t.jsx)(s.Plus,{className:"mr-2 h-4 w-4"}),"Add Product"]})}),(0,t.jsxs)(i.DialogContent,{children:[(0,t.jsxs)(i.DialogHeader,{children:[(0,t.jsx)(i.DialogTitle,{children:"Add Product"}),(0,t.jsx)(i.DialogDescription,{children:"Add a new product to your catalog. Click create when you're done."})]}),(0,t.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"name",children:"Name"}),(0,t.jsx)(o.Input,{id:"name",name:"name",placeholder:"Product name",required:!0,disabled:l})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"description",children:"Description"}),(0,t.jsx)(u,{id:"description",name:"description",placeholder:"Product description",disabled:l})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"categoryId",children:"Category"}),x?(0,t.jsx)("div",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm items-center",children:"Loading categories..."}):(0,t.jsxs)("select",{id:"categoryId",name:"categoryId",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",required:!0,disabled:x||0===p.length,children:[(0,t.jsx)("option",{value:"",children:"Select a category"}),p.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"price",children:"Price"}),(0,t.jsx)(o.Input,{id:"price",name:"price",type:"number",step:"0.01",placeholder:"0.00",required:!0,disabled:l})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"stock",children:"Stock"}),(0,t.jsx)(o.Input,{id:"stock",name:"stock",type:"number",placeholder:"0",required:!0,disabled:l})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"image",children:"Image"}),(0,t.jsx)(o.Input,{id:"image",name:"image",type:"file",accept:"image/*",disabled:l})]})]}),(0,t.jsxs)(i.DialogFooter,{children:[(0,t.jsx)(n.Button,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:l,children:"Cancel"}),(0,t.jsx)(n.Button,{type:"submit",disabled:l,children:l?"Creating...":"Create"})]})]})]})]})}var m=e.i(57688),x=e.i(92930),g=e.i(41071);let h=(0,e.i(75254).default)("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var f=e.i(55146),j=e.i(84774),b=e.i(68499);function v(e){let{open:r,onOpenChange:l,product:s,onSuccess:c}=e,[p,m]=(0,a.useState)(!1),[x,g]=(0,a.useState)([]),[h,f]=(0,a.useState)(!1);async function j(){try{f(!0);let e=await fetch("/api/categories"),t=await e.json();t.success&&g(t.data||[])}catch(e){console.error("Failed to load categories:",e)}finally{f(!1)}}async function b(e){if(e.preventDefault(),!s)return;m(!0);let t=e.currentTarget,a=new FormData(t),r=t.querySelector('input[type="file"]');r&&r.files&&0===r.files.length&&a.delete("image");try{let e=await fetch("/api/products/".concat(s.id),{method:"PUT",body:a}),t=await e.json();if(!e.ok||!t.success){var n;let e=(null==(n=t.error)?void 0:n.message)||"Failed to update product";throw console.error("Update error:",t.error),Error(e)}c(),l(!1)}finally{m(!1)}}return(0,a.useEffect)(()=>{r&&j()},[r]),(0,t.jsx)(i.Dialog,{open:r,onOpenChange:l,children:(0,t.jsxs)(i.DialogContent,{children:[(0,t.jsxs)(i.DialogHeader,{children:[(0,t.jsx)(i.DialogTitle,{children:"Edit Product"}),(0,t.jsx)(i.DialogDescription,{children:"Make changes to your product here. Click save when you're done."})]}),(0,t.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"name",children:"Name"}),(0,t.jsx)(o.Input,{id:"name",name:"name",defaultValue:null==s?void 0:s.name,required:!0,disabled:p})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"description",children:"Description"}),(0,t.jsx)(u,{id:"description",name:"description",defaultValue:(null==s?void 0:s.description)||"",disabled:p})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"categoryId",children:"Category"}),h?(0,t.jsx)("div",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm items-center",children:"Loading categories..."}):(0,t.jsxs)("select",{id:"categoryId",name:"categoryId",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",defaultValue:(null==s?void 0:s.categoryId)||"",disabled:h||0===x.length,children:[(0,t.jsx)("option",{value:"",children:"Select a category"}),x.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"price",children:"Price"}),(0,t.jsx)(o.Input,{id:"price",name:"price",type:"number",step:"0.01",defaultValue:null==s?void 0:s.price,required:!0,disabled:p})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"stock",children:"Stock"}),(0,t.jsx)(o.Input,{id:"stock",name:"stock",type:"number",defaultValue:null==s?void 0:s.stock,required:!0,disabled:p})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(d.Label,{htmlFor:"image",children:"Image"}),(0,t.jsx)(o.Input,{id:"image",name:"image",type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",disabled:p})]})]}),(0,t.jsxs)(i.DialogFooter,{children:[(0,t.jsx)(n.Button,{type:"button",variant:"outline",onClick:()=>l(!1),disabled:p,children:"Cancel"}),(0,t.jsx)(n.Button,{type:"submit",disabled:p,children:p?"Saving...":"Save changes"})]})]})]})})}async function y(){let e=await fetch("/api/products");return(await e.json()).data}function N(){let{isAdmin:e}=(0,r.useAuth)(),[l,s]=(0,a.useState)([]),[i,o]=(0,a.useState)(!0),[d,c]=(0,a.useState)({open:!1,productId:null}),[u,p]=(0,a.useState)({open:!1,product:null});async function N(){try{o(!0);let e=await y();s(e)}catch(e){console.error("Failed to load products:",e)}finally{o(!1)}}async function w(e){let t=[...l];s(l.filter(t=>t.id!==e));try{if(!(await fetch("/api/products/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete product");c({open:!1,productId:null})}catch(e){s(t),console.error("Failed to delete product:",e)}}async function D(e){let t=[...l];s(l.map(t=>t.id===e.id?e:t));try{await N(),p({open:!1,product:null})}catch(e){s(t),console.error("Failed to update product:",e)}}return((0,a.useEffect)(()=>{N()},[]),i)?(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(j.Table,{children:[(0,t.jsx)(j.TableHeader,{children:(0,t.jsxs)(j.TableRow,{children:[(0,t.jsx)(j.TableHead,{className:"w-[100px]",children:"Image"}),(0,t.jsx)(j.TableHead,{children:"Name"}),(0,t.jsx)(j.TableHead,{children:"Description"}),(0,t.jsx)(j.TableHead,{className:"text-right",children:"Price"}),(0,t.jsx)(j.TableHead,{className:"text-right",children:"Stock"}),e()&&(0,t.jsx)(j.TableHead,{className:"text-right w-[100px]",children:"Actions"})]})}),(0,t.jsx)(j.TableBody,{children:Array.from({length:5}).map((a,r)=>(0,t.jsxs)(j.TableRow,{className:"animate-pulse",children:[(0,t.jsx)(j.TableCell,{children:(0,t.jsx)("div",{className:"h-10 w-10 rounded-md bg-muted"})}),(0,t.jsx)(j.TableCell,{children:(0,t.jsx)("div",{className:"h-4 w-[200px] rounded bg-muted"})}),(0,t.jsx)(j.TableCell,{children:(0,t.jsx)("div",{className:"h-4 w-[300px] rounded bg-muted"})}),(0,t.jsx)(j.TableCell,{className:"text-right",children:(0,t.jsx)("div",{className:"h-4 w-[60px] rounded bg-muted ml-auto"})}),(0,t.jsx)(j.TableCell,{className:"text-right",children:(0,t.jsx)("div",{className:"h-4 w-10 rounded bg-muted ml-auto"})}),e()&&(0,t.jsx)(j.TableCell,{children:(0,t.jsx)("div",{className:"h-8 w-[100px] rounded bg-muted ml-auto"})})]},"loading-".concat(r)))})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(j.Table,{children:[(0,t.jsx)(j.TableHeader,{children:(0,t.jsxs)(j.TableRow,{children:[(0,t.jsx)(j.TableHead,{className:"w-[100px]",children:"Image"}),(0,t.jsx)(j.TableHead,{children:"Name"}),(0,t.jsx)(j.TableHead,{children:"Description"}),(0,t.jsx)(j.TableHead,{className:"text-right",children:"Price"}),(0,t.jsx)(j.TableHead,{className:"text-right",children:"Stock"}),e()&&(0,t.jsx)(j.TableHead,{className:"text-right w-[100px]",children:"Actions"})]})}),(0,t.jsx)(j.TableBody,{children:0===l.length?(0,t.jsx)(j.TableRow,{children:(0,t.jsx)(j.TableCell,{colSpan:e()?6:5,className:"text-center text-muted-foreground",children:"No products found."})}):l.map(a=>(0,t.jsxs)(j.TableRow,{children:[(0,t.jsx)(j.TableCell,{children:a.image?(0,t.jsx)(m.default,{src:a.image,alt:a.name,width:40,height:40,className:"rounded-md object-cover"}):(0,t.jsx)("div",{className:"h-10 w-10 rounded-md bg-muted"})}),(0,t.jsx)(j.TableCell,{className:"font-medium",children:a.name}),(0,t.jsx)(j.TableCell,{className:"max-w-[300px] truncate",children:a.description}),(0,t.jsxs)(j.TableCell,{className:"text-right",children:["$",a.price.toFixed(2)]}),(0,t.jsx)(j.TableCell,{className:"text-right",children:a.stock}),e()&&(0,t.jsx)(j.TableCell,{className:"text-right",children:(0,t.jsxs)(f.DropdownMenu,{children:[(0,t.jsx)(f.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsxs)(n.Button,{variant:"ghost",size:"icon",children:[(0,t.jsx)(g.MoreHorizontal,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Open menu"})]})}),(0,t.jsxs)(f.DropdownMenuContent,{align:"end",children:[(0,t.jsx)(f.DropdownMenuLabel,{children:"Actions"}),(0,t.jsxs)(f.DropdownMenuItem,{onClick:()=>p({open:!0,product:a}),children:[(0,t.jsx)(x.Edit2,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,t.jsxs)(f.DropdownMenuItem,{className:"text-red-600",onClick:()=>c({open:!0,productId:a.id}),children:[(0,t.jsx)(h,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},a.id))})]})}),(0,t.jsx)(b.AlertDialog,{open:d.open,onOpenChange:e=>c({open:e,productId:null}),children:(0,t.jsxs)(b.AlertDialogContent,{children:[(0,t.jsxs)(b.AlertDialogHeader,{children:[(0,t.jsx)(b.AlertDialogTitle,{children:"Are you sure?"}),(0,t.jsx)(b.AlertDialogDescription,{children:"This action cannot be undone. This will permanently delete the product."})]}),(0,t.jsxs)(b.AlertDialogFooter,{children:[(0,t.jsx)(b.AlertDialogCancel,{children:"Cancel"}),(0,t.jsx)(b.AlertDialogAction,{className:"bg-red-600 text-red-50 hover:bg-red-700",onClick:()=>d.productId&&w(d.productId),children:"Delete"})]})]})}),(0,t.jsx)(v,{open:u.open,onOpenChange:e=>p({open:e,product:null}),product:u.product,onSuccess:()=>D(u.product)})]})}function w(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"skeleton",className:(0,c.cn)("bg-accent animate-pulse rounded-md",a),...r})}function D(){return(0,t.jsx)("div",{className:"rounded-md border",children:(0,t.jsxs)(j.Table,{children:[(0,t.jsx)(j.TableHeader,{children:(0,t.jsxs)(j.TableRow,{children:[(0,t.jsx)(j.TableHead,{className:"w-[100px]",children:"Image"}),(0,t.jsx)(j.TableHead,{children:"Name"}),(0,t.jsx)(j.TableHead,{children:"Description"}),(0,t.jsx)(j.TableHead,{className:"text-right",children:"Price"}),(0,t.jsx)(j.TableHead,{className:"text-right",children:"Stock"}),(0,t.jsx)(j.TableHead,{className:"text-right w-[100px]",children:"Actions"})]})}),(0,t.jsx)(j.TableBody,{children:Array.from({length:5}).map((e,a)=>(0,t.jsxs)(j.TableRow,{children:[(0,t.jsx)(j.TableCell,{children:(0,t.jsx)(w,{className:"h-10 w-10"})}),(0,t.jsx)(j.TableCell,{children:(0,t.jsx)(w,{className:"h-4 w-[200px]"})}),(0,t.jsx)(j.TableCell,{children:(0,t.jsx)(w,{className:"h-4 w-[300px]"})}),(0,t.jsx)(j.TableCell,{className:"text-right",children:(0,t.jsx)(w,{className:"h-4 w-[60px] ml-auto"})}),(0,t.jsx)(j.TableCell,{className:"text-right",children:(0,t.jsx)(w,{className:"h-4 w-[40px] ml-auto"})}),(0,t.jsx)(j.TableCell,{children:(0,t.jsx)(w,{className:"h-8 w-[100px] ml-auto"})})]},a))})]})})}function T(){let{isAdmin:e,isLoading:s}=(0,r.useAuth)(),n=(0,l.useRouter)();return((0,a.useEffect)(()=>{s||e()||n.push("/")},[s,e,n]),s||!e())?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[60vh]",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})}):(0,t.jsxs)("div",{className:"flex flex-col space-y-8 w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h1",{className:"text-4xl font-bold tracking-tight",children:"Products Management"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Manage your product catalog, including inventory and pricing."})]}),(0,t.jsx)(p,{})]}),(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)(D,{}),children:(0,t.jsx)(N,{})})]})}}]);